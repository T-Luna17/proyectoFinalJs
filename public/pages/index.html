<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸ“Š EstadÃ­sticas de Tiquetes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../estilos/estilos.css" />
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand fw-semibold" href="#">Tiquetes en Clase</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
              aria-controls="mainNav" aria-expanded="false" aria-label="Alternar navegaciÃ³n">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="mainNav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="./principal.html">Principal</a></li>
          <li class="nav-item"><a class="nav-link active" href="./estadisticas.html" aria-current="page">EstadÃ­sticas</a></li>
          <li class="nav-item"><a class="nav-link" href="./login.html">Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <header class="mb-4">
      <h1 class="h3 mb-1">ðŸ“Š EstadÃ­sticas diarias â€” Â¡Bienvenidos!</h1>
      <p class="text-muted mb-0">
        Listado de consultas <strong>atendidas</strong> (Ãºltimos 3 dÃ­as).
        Filtros y mÃ©tricas disponibles.
      </p>
    </header>

    <!-- Mensajes de estado para carga/errores -->
    <section id="stats-status" class="mb-3" aria-live="polite"></section>

    <!-- Filtros -->
    <section id="seccion-filtros" class="mb-3" aria-label="Filtros de bÃºsqueda">
      <div class="card shadow-sm">
        <div class="card-body">
          <form id="form-filtros" class="row g-2" novalidate>
            <div class="col-12 col-md-4">
              <label for="q-nombre" class="form-label mb-0">Nombre del estudiante</label>
              <input id="q-nombre" type="search" class="form-control" placeholder="Ej. Adrian" />
            </div>
            <div class="col-12 col-md-4">
              <label for="q-texto" class="form-label mb-0">Palabra clave en la consulta</label>
              <input id="q-texto" type="search" class="form-control" placeholder="Ej. JSON, fetch, error 404" />
            </div>
            <div class="col-12 col-md-2">
              <label for="input-fecha-desde" class="form-label mb-0">Desde</label>
              <input id="input-fecha-desde" type="date" class="form-control" />
            </div>
            <div class="col-12 col-md-2">
              <label for="input-fecha-hasta" class="form-label mb-0">Hasta</label>
              <input id="input-fecha-hasta" type="date" class="form-control" />
            </div>
            <div class="col-12 text-end">
              <!-- BotÃ³n opcional si luego aplicas fechas; por ahora no es necesario para filtrar en memoria -->
              <button id="btn-aplicar" class="btn btn-outline-primary btn-sm" type="submit" disabled>Aplicar</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Tabla -->
    <section id="seccion-tabla" aria-label="Listado de solicitudes atendidas">
      <div class="table-responsive shadow-sm">
        <table class="table table-sm table-hover align-middle mb-0">
          <caption class="visually-hidden">Tabla de consultas atendidas con fecha, hora, estudiante y detalle</caption>
          <thead class="table-light">
            <tr>
              <th scope="col">Estudiante</th>
              <th scope="col">Fecha</th>
              <th scope="col">Hora</th>
              <th scope="col">Consulta</th>
              <th scope="col">Estado</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <!-- filas generadas por JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- MÃ©tricas -->
    <section id="seccion-metricas" class="mt-4" aria-label="MÃ©tricas de uso">
      <div class="row g-3">
        <div class="col-12 col-md-4">
          <div class="card text-center h-100">
            <div class="card-body">
              <div class="text-muted">Total consultas</div>
              <div id="metric-total" class="fs-3 fw-semibold">â€”</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card text-center h-100">
            <div class="card-body">
              <div class="text-muted">Promedio diario</div>
              <div id="metric-promedio" class="fs-3 fw-semibold">â€”</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="text-muted text-center mb-2">Desglose por estudiante</div>
              <ul id="metric-por-estudiante" class="mb-0">
                <!-- <li><strong>Adrian</strong>: 3</li> -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="border-top py-3">
    <div class="container small text-muted">
      Sistema de Tiquetes â€¢ EstadÃ­sticas Â· Proyecto AcadÃ©mico â€” Persona 3
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <!-- Carga del mÃ³dulo JS de la app (login + estadÃ­sticas) -->
  <script type="module" src="../js/app.js"></script>

  <noscript>
    <div class="alert alert-warning text-center m-3" role="alert">
      Para ver las estadÃ­sticas, habilita JavaScript en tu navegador.
    </div>
  </noscript>
</body>
</html>